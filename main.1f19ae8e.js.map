{"version":3,"sources":["main.js"],"names":["toggleModeBtn","document","querySelector","todoList","initialItem","todoForm","itemsCountEl","getElementById","clearCompletedBtn","selectBtns","querySelectorAll","filterAll","filterActive","filterCompleted","todoListArray","description","isCompleted","id","appliedFilter","toggleMode","documentElement","hasAttribute","setAttribute","sunIcon","removeAttribute","moonIcon","toggleCompletedClass","el","classList","contains","remove","add","getElementBefore","container","y","elements","elBefore","forEach","offset","getBoundingClientRect","height","push","length","createItem","item","cloneNode","textContent","addEventListener","e","target","parentElement","clientY","undefined","insertBefore","appendChild","createListItems","itemsArray","fragment","DocumentFragment","addTodo","preventDefault","children","value","Date","toString","updateCount","applayFilter","saveState","toggleCompleted","current","closest","allTodos","Array","from","itemIndex","findIndex","todo","dataset","handleItemClick","filter","countItems","reduce","count","handleClearCompleted","todos","style","display","handleFilter","btn","localStorage","setItem","JSON","stringify","populateState","getItem","parse","window","onload","replaceChild"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["import sunIcon from \"./images/icon-sun.svg\";\nimport moonIcon from \"./images/icon-moon.svg\";\n\n(() => {\n  /* GRABING ALL ELEMENTS INTO VARIABLES */\n  const toggleModeBtn = document.querySelector(\".header__button\");\n  const todoList = document.querySelector(\".todo-list\");\n  const initialItem =\n    document.querySelector(\n      \".todo-list__item\"\n    ); /* needed to clone node to not create complet element from scratch */\n  const todoForm = document.querySelector(\".todo-form\");\n  const itemsCountEl = document.getElementById(\"amount\");\n  const clearCompletedBtn = document.getElementById(\"clear-completed\");\n  const selectBtns = document.querySelectorAll(\".btn-select\");\n  const filterAll = document.getElementById(\"select-all\");\n  const filterActive = document.getElementById(\"select-active\");\n  const filterCompleted = document.getElementById(\"select-completed\");\n\n  /* State */\n  let todoListArray = [\n    {\n      description: \"Hello\",\n      isCompleted: false,\n      id: \"0\",\n    },\n    {\n      description: \"Hello World\",\n      isCompleted: true,\n      id: \"1\",\n    },\n  ];\n  let appliedFilter = \"all\";\n\n  /* FUNCTIONS */\n\n  /* Toggle Dark/Light mode */\n  function toggleMode() {\n    if (!document.documentElement.hasAttribute(\"data-theme\")) {\n      document.documentElement.setAttribute(\"data-theme\", \"dark\");\n      toggleModeBtn.querySelector(\".header__icon\").setAttribute(\"src\", sunIcon);\n    } else {\n      document.documentElement.removeAttribute(\"data-theme\");\n      toggleModeBtn\n        .querySelector(\".header__icon\")\n        .setAttribute(\"src\", moonIcon);\n    }\n  }\n\n  /* Toggle completed Class*/\n  function toggleCompletedClass(el) {\n    if (el.classList.contains(\"completed\")) {\n      el.classList.remove(\"completed\");\n      el.classList.remove(\"checked\");\n    } else {\n      el.classList.add(\"completed\");\n      el.classList.add(\"checked\");\n    }\n  }\n\n  /* Determine before element for place dragging element*/\n  function getElementBefore(container, y) {\n    const elements = [...container.querySelectorAll(\".todo-list__item\")];\n    let elBefore = [];\n    elements.forEach((el) => {\n      let offset =\n        y -\n        el.getBoundingClientRect().y -\n        el.getBoundingClientRect().height / 2;\n      if (offset < 0) {\n        elBefore.push(el);\n      }\n    });\n    if (elBefore.length > 0) {\n      return elBefore[0];\n    }\n  }\n\n  /* Create list item element */\n  function createItem(el) {\n    let item = initialItem.cloneNode(true);\n    item.querySelector(\".todo-list__text\").textContent = el.description;\n    item.setAttribute(\"data-id\", `${el.id}`);\n    if (el.isCompleted) {\n      toggleCompletedClass(item);\n    }\n    /* Dragging functionality */\n    item.addEventListener(\"dragstart\", (e) => {\n      e.target.classList.add(\"dragging\");\n    });\n    item.addEventListener(\"dragend\", (e) => {\n      const container = e.target.parentElement;\n      const elBefore = getElementBefore(container, e.clientY);\n      /* Place dragging element before founded todo */\n      if (elBefore !== undefined) {\n        container.insertBefore(e.target, elBefore);\n        /* When no element before place dragging element at the end of list */\n      } else {\n        container.appendChild(e.target);\n      }\n    });\n    return item;\n  }\n\n  /* Create list items */\n  function createListItems(itemsArray) {\n    const fragment = new DocumentFragment();\n    itemsArray.forEach((el) => {\n      fragment.appendChild(createItem(el));\n    });\n    return fragment;\n  }\n\n  /* Add Todo */\n  function addTodo(e) {\n    e.preventDefault();\n    if (e.target.children[1].value === \"\") return;\n    const item = {\n      description: e.target[1].value,\n      isCompleted: false,\n      id: new Date().toString(),\n    };\n    todoListArray.push(item); /* updating state */\n    todoList.appendChild(createItem(item));\n    updateCount();\n    applayFilter();\n    e.target.children[1].value = \"\";\n    saveState();\n  }\n\n  /* Toggle completed */\n  function toggleCompleted(e) {\n    const current = e.target.closest(\".todo-list__item\");\n    const allTodos = document.querySelectorAll(\".todo-list__item\");\n    Array.from(allTodos).forEach((el) => {\n      if (el === current) {\n        toggleCompletedClass(current);\n        let itemIndex = todoListArray.findIndex((todo) => {\n          return todo.id === current.dataset.id;\n        });\n        todoListArray[itemIndex].isCompleted =\n          !todoListArray[itemIndex].isCompleted;\n        applayFilter();\n      }\n    });\n    updateCount();\n    saveState();\n  }\n\n  /* Handle Click on item Complete btn and remove btn */\n  function handleItemClick(e) {\n    if (e.target.closest(\".todo-list__btn-check\")) {\n      /* toggle Completed btn */\n      toggleCompleted(e);\n    } else if (e.target.closest(\".todo-list__btn-remove\")) {\n      /* remove item */\n      const allTodos = document.querySelectorAll(\".todo-list__item\");\n      const current = e.target.closest(\".todo-list__item\");\n      Array.from(allTodos).forEach((el) => {\n        if (el === current) {\n          e.target.closest(\".todo-list__item\").remove();\n          todoListArray = todoListArray.filter(\n            (todo) => todo.id !== current.dataset.id\n          );\n        }\n      });\n      updateCount();\n      saveState();\n    }\n  }\n\n  /* Update items left count */\n  function updateCount() {\n    const countItems = todoListArray.reduce((count, current) => {\n      return count + (current.isCompleted ? 0 : 1);\n    }, 0);\n    itemsCountEl.textContent = countItems;\n  }\n\n  /* Clear completed functionality */\n  function handleClearCompleted() {\n    Array.from(document.querySelectorAll(\".todo-list__item.completed\")).forEach(\n      (el) => el.remove()\n    );\n    todoListArray = todoListArray.filter((todo) => !todo.isCompleted);\n    saveState();\n  }\n\n  /* Applay filter */\n  function applayFilter() {\n    const todos = Array.from(document.querySelectorAll(\".todo-list__item\"));\n\n    if (appliedFilter === \"active\") {\n      todos.forEach((el) => {\n        if (el.classList.contains(\"completed\")) el.style.display = \"none\";\n        else el.style.display = \"flex\";\n      });\n    } else if (appliedFilter === \"completed\") {\n      todos.forEach((el) => {\n        if (el.classList.contains(\"completed\")) el.style.display = \"flex\";\n        else el.style.display = \"none\";\n      });\n    } else {\n      todos.forEach((el) => {\n        el.style.display = \"flex\";\n      });\n    }\n  }\n\n  /* Handle filter */\n  function handleFilter(e) {\n    /* Remove active class from all buttons */\n    Array.from(selectBtns).forEach((btn) => btn.classList.remove(\"active\"));\n    /* Add class active to clicked button */\n    e.target.classList.add(\"active\");\n\n    if (e.target.id === \"select-active\") {\n      appliedFilter = \"active\";\n      applayFilter();\n    } else if (e.target.id === \"select-completed\") {\n      appliedFilter = \"completed\";\n      applayFilter();\n    } else {\n      appliedFilter = \"all\";\n      applayFilter();\n    }\n  }\n\n  /* Save state in Loncal Storage */\n  function saveState() {\n    localStorage.setItem(\"todoListArray\", JSON.stringify(todoListArray));\n    localStorage.setItem(\"appliedFilter\", JSON.stringify(appliedFilter));\n  }\n\n  /* Populate state */\n  function populateState() {\n    const itemsArray = localStorage.getItem(\"todoListArray\");\n    if (itemsArray) {\n      todoListArray = JSON.parse(itemsArray);\n    }\n  }\n\n  /* Initialization */\n  window.onload = function () {\n    populateState();\n    todoList.replaceChild(\n      createListItems(todoListArray),\n      initialItem\n    ); /* replace initial item with state items */\n    updateCount();\n  };\n\n  /* EVENT LISTENERS */\n  /* Toggle Dark/Light mode */\n  toggleModeBtn.addEventListener(\"click\", toggleMode);\n  /* Add a todo */\n  todoForm.addEventListener(\"submit\", addTodo);\n  /* Switch todo completed */\n  todoList.addEventListener(\"click\", handleItemClick);\n  /* Clear Completed Todos */\n  clearCompletedBtn.addEventListener(\"click\", handleClearCompleted);\n  /* Applay filte */\n  filterAll.addEventListener(\"click\", handleFilter);\n  filterActive.addEventListener(\"click\", handleFilter);\n  filterCompleted.addEventListener(\"click\", handleFilter);\n  /* Dragging todos */\n})();\n"]}